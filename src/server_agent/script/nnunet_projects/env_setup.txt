# 进入到nnunet源码目录
cd {YOUR}/{PATH}/nnunet_projects/packages
tar xzvf nnUNet.tar.gz
cd nnUNet

# 创建环境
conda create -n nnunet python==3.8.19
conda activate nnunet

# nvidia-smi 查看cuda版本
## CUDA 11.x
conda install pytorch==2.3.0 torchvision==0.18.0 torchaudio==2.3.0 pytorch-cuda=11.8 -c pytorch -c nvidia
## CUDA 12.x
conda install pytorch==2.3.0 torchvision==0.18.0 torchaudio==2.3.0 pytorch-cuda=12.1 -c pytorch -c nvidia

# 查看能否调用cuda, 返回True就是成功了
python -c "import torch; print(torch.cuda.is_available())"

# 安装依赖, 如果失败, 自行尝试版本
pip install tqdm==4.66.4 dicom2nifti==2.4.11 numpy==1.24.3 SimpleITK==2.3.1 nibabel==5.2.1 pandas==2.0.3 scikit-learn==1.3.2 scikit-image==0.21.0 batchgenerators==0.25 MedPy==0.5.1 fsspec==2024.5.0 matplotlib==3.7.5

# 安装nnUNet, 确保你在{YOUR}/{PATH}/nnunet_projects/packages/nnUNet的目录里了
python setup.py install

# 有nnUNet提示就是证明装成功了, 如果失败, 自行调试
nnUNet_predict --help

# 进入pipeline目录, 修改predict.py, 然后运行即可
cd {YOUR}/{PATH}/nnunet_projects/my_pipeline
...
python -u predict.py


